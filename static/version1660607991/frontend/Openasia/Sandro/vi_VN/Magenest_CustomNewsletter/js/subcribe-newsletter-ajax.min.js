define(['jquery','mage/mage'],function($){'use strict';return function(config){var dataForm=$('#'+config.formId),buttonValidateEmail=$('#subscribe_button'),genderElement=$('.newsletterinscription-subscribe'),genderButtonElement=$('.newsletter_gender_button'),newsInscriptionResultElement=$('.news-inscription-result'),genderValue=null;buttonValidateEmail.on('click',function(e){var inputGenderValue=$("input[type=radio][name=gender]:checked").val();if(typeof inputGenderValue!=undefined){genderValue=inputGenderValue;}
nextStep();});genderButtonElement.on('click',function(e){var self=this,dataValue=$(self).attr('data-value');if(typeof dataValue!=undefined){genderValue=dataValue;}});dataForm.on('submit',function(e){if(dataForm.validation('isValid')){var email=$("#newsletter").val(),url=dataForm.attr('action');e.preventDefault();$('body').trigger('processStart');try{$.ajax({url:url,dataType:'json',type:'POST',data:{email:email,gender:genderValue},success:function(response){if(response.data){$('.newsletter-form-message').html(response.data.message);genderElement.hide();newsInscriptionResultElement.show();}
$('body').trigger('processStop');},});}catch(e){console.log(e.message);$('body').trigger('processStop');}}});dataForm.on('keyup keypress',function(e){var keyCode=e.keyCode||e.which;if(keyCode===13){e.preventDefault();nextStep();return false;}});function nextStep(){if(dataForm.validation('isValid')){$('.main-content-newsletterinscription').hide();genderElement.show().addClass('active');}}};});