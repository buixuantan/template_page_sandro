define(['jquery','jquery-ui-modules/widget'],function($){'use strict';return function(widget){$.widget('mage.addToWishlist',widget,{_create:function(){this._bindValidOption();this._bind();},_bindValidOption:function(){var options=this.options,updateWishlist='click '+options.actionElement,events={};if(options.productType=="configurable"){events[updateWishlist]='_validateSelectedOption';}
this._on(events);},_updateWishlistData:function(event){var dataToAdd={},isFileUploaded=false,handleObjSelector=null,self=this;if(event.handleObj.selector==this.options.qtyInfo){this._updateAddToWishlistButton({},event);event.stopPropagation();return;}
handleObjSelector=$(event.currentTarget).closest('form').find(event.handleObj.selector);handleObjSelector.each(function(index,element){if($(element).is('input[type=text]')||$(element).is('input[type=email]')||$(element).is('input[type=number]')||$(element).is('input[type=hidden]')||$(element).is('input[type=checkbox]:checked')||$(element).is('input[type=radio]:checked')||$(element).is('textarea')||$('#'+element.id+' option:selected').length){if($(element).data('selector')||$(element).attr('name')){dataToAdd=$.extend({},dataToAdd,self._getElementData(element));}
return;}
if($(element).is('input[type=file]')&&$(element).val()){isFileUploaded=true;}});if(isFileUploaded){this.bindFormSubmit();}
window.dataToAdd=dataToAdd;this._updateAddToWishlistButton(dataToAdd,event);event.stopPropagation();},_validateSelectedOption:function(event){if(!window.dataToAdd||!this._hasSelectedOption(window.dataToAdd)){this.element.find("#valid-message").removeAttr('hidden');event.preventDefault();event.stopPropagation();delete window.dataToAdd;}},_hasSelectedOption:function(data){var result=true;$.each(data,(function(key,value){if(value===""){result=false;}}));return result;},});return $.mage.addToWishlist;};});