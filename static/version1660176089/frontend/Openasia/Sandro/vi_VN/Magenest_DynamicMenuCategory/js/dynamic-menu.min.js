define(['jquery','mage/storage','jquery-ui-modules/widget'],function($){'use strict';const COOKIE_NAME='mgn_menu_category';const COOKIE_CATEGORY_FIRST='category_first';$.widget('magenest.dynamicMenu',{options:{categoryMenuId:null,categoryFirst:null,listCate:null},_create:function(){var cookies=this._getCookie(COOKIE_NAME),categoryMenuId=this.options.categoryMenuId,cookieCategoryFirst=this._getCookie(COOKIE_CATEGORY_FIRST),cate=this.options.listCate;if(cate!==null){let ids=cate.split(',');if($.inArray(this.options.categoryFirst,ids)!==-1){this._createCookie(COOKIE_CATEGORY_FIRST,this.options.categoryFirst,365);}}
if(categoryMenuId!=null&&categoryMenuId!=cookies){this._createCookie(COOKIE_NAME,categoryMenuId,365);}
var selector='.switch-gender li[data-id="'+categoryMenuId+'"]';if(($(selector).length>0)&&(!$(selector).hasClass("active"))){$(selector).addClass("active");}},_createCookie:function(name,value,days,sessionOnly){var expires="";if(sessionOnly){expires="; expires=0"}else if(days){var date=new Date();date.setTime(date.getTime()+(days*86400*1000));expires="; expires="+date.toGMTString();}
document.cookie=name+"="+value+expires+"; path=/";},_getCookie:function(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)===0)return c.substring(nameEQ.length,c.length);}
return null;},_eraseCookie:function(name){this._createCookie(name,"",-1);},});return $.magenest.dynamicMenu;});